<h2>Sign up for our newsletter to receive news and specials!</h2>
<div id='formContainer'>
  <form
    class='form-horizontal newsletterForm'
    role='form'
    action='/newslatter'
    method='POST'
  >
    <div class='form-group'>
      <label for='fieldName'>Name</label>
      <input type='text' class='form-control' id='fieldName' name='name' />
    </div>
    <div class='form-group'>
      <label for='fieldEmail'>Email</label>
      <input
        type='email'
        class='form-control'
        id='fieldEmail'
        name='email'
        required
      />
    </div>
    <div class='form-group'>
      <button type='submit' class='btn'>Register</button>
    </div>
  </form>
</div>

<script>
  document.getElementById('newsletterSignupForm') .addEventListener('submit',
  evt => { evt.preventDefault() const form = evt.target const body =
  JSON.stringify({ _scrf: form.elements._csrf.value, name:
  form.elements.name.value, email: form.elements.email.value, }) const headers =
  {'Content-Type': 'application/json'} const formContainer =
  document.getElementById('newletterSignupFormContainer')
  fetch('/api/newsletter-signup', {method: 'post', body, headers}) .then(resp =>
  { if(resp.status < 200 || resp.status >= 300) throw new error(`Request failed
  with status ${resp.status}`) return resp.json() }) .then(json => {
  container.innerHTML = '<b>Thank you for signing up!</b>' }) .catch(err=> {
  container.innerHTML = `<b>We're sorry, we had a problem`+`signing you up.
  Please <a href="/newsletter">try again</a>` }) })
</script>